"use strict";define(["common/slider/slider","common/svgicos/svgicos","site/pages/pages","site/popups/popups","site/panels/panels","./lang"],(function(e,t,n,o,i,s){let r,l={__proto__:null,appendCss(e,t){const n=document.createElement("link");return self.less&&!t?(n.rel="stylesheet/less",n.href=e+".less",less.sheets.push(n),less.refresh()):(n.rel="stylesheet",n.href=e+".css"),document.head.appendChild(n)},removeCss(e){e.remove(),"stylesheet/less"===e.rel&&(less.sheets.splice(less.sheets.indexOf(e),1),less.refresh())},makeSvg(e,t){const n="http://www.w3.org/2000/svg",o=document.createElementNS(n,"svg");return o.appendChild(document.createElementNS(n,"path")),e&&l.setSvgPath(o,e,t),o},setSvgPath(e,n,o){let i;if(n in t&&(n=t[n]),e.firstChild.setAttribute("d",n),3==o)i={x:0,y:0,width:24,height:24};else{const e=l.makeSvg();e.style.position="absolute",e.style.bottom=e.style.right="100%",e.firstChild.setAttribute("d",n),document.body.appendChild(e),i=e.firstChild.getBBox(),e.remove(),2==o?(i.width+=2*i.x,i.x=0,i.height+=2*i.y,i.y=0):o&&(i.width>i.height?(i.y-=(i.width-i.height)/2,i.height=i.width):(i.x-=(i.height-i.width)/2,i.width=i.height))}e.setAttribute("viewBox",i.x+" "+i.y+" "+i.width+" "+i.height)},encodeArg:(e,t)=>e.replace(t?/[^!$\x26-\x2e\x30-\x3b\x3f-\x5f\x61-\x7e]+/g:/[^!$=\x26-\x2e\x30-\x3b\x3f-\x5f\x61-\x7e]+/g,encodeURIComponent),buildHash(e){let t="#/"+l.encodeArg(e.id,!0);for(let n in e.args)t+="/"+l.encodeArg(n,!0),void 0!==e.args[n]&&(t+="="+l.encodeArg(e.args[n]));return t},parseHash(e){const t={__proto__:null,id:r,args:{__proto__:null}},o=e.substring(1).match(/[^=/]+(=[^/]*)?/g);if(o){let e=decodeURIComponent(o[0],!0);e in n&&(t.id=e);for(let n=1;n<o.length;n++)e=o[n].match(/^([^=]+)(=)?(.+)?$/),e&&(t.args[decodeURIComponent(e[1],!0)]=e[2]?decodeURIComponent(e[3]||""):void 0)}return t},isSameLocation(e,t){if(e.id===t.id&&Object.keys(e.args).length===Object.keys(t.args).length){for(const n in e.args){if(!(n in t.args))return!1;if(void 0===e.args[n]){if(e.args[n]!==t.args[n])return!1}else if(""+e.args[n]!=""+t.args[n])return!1}return!0}return!1},replaceLocation(e){l.location&&l.isSameLocation(e,l.location)?l.reloadPage():location.replace(l.buildHash(e))},getLang(e){if(navigator.languages){for(let t=0;t<navigator.languages.length;t++)if(navigator.languages[t]in e)return e[navigator.languages[t]]}else if(navigator.language in e)return e[navigator.language];return e.en}};return s=l.getLang(s),(()=>{const e="function"==typeof Symbol?Symbol("xEvents"):"xEvents";function t(t){this[e][t.type].locked=!0;for(let n=0;n<this[e][t.type].heap.length;n++)this[e][t.type].heap[n].call(this,t);for(this[e][t.type].locked=!1;this[e][t.type].stack.length;){if(this[e][t.type].stack[0])if("function"==typeof this[e][t.type].stack[0]){const n=this[e][t.type].heap.indexOf(this[e][t.type].stack[0]);n>=0&&this[e][t.type].heap.splice(n,1)}else this[e][t.type].heap.indexOf(this[e][t.type].stack[0][0])<0&&this[e][t.type].heap.push(this[e][t.type].stack[0][0]);else this[e][t.type].heap.splice(0);this[e][t.type].stack.shift()}n(this,t.type)}function n(t,n,o){!o&&t[e][n].heap.length||(delete t[e][n],t["on"+n]=null)}l.listeners={on(n,o,i){let s=0;return"function"==typeof i&&(Object.hasOwn(n,e)||(n[e]={__proto__:null}),o in n[e]||(n[e][o]={stack:[],heap:[],locked:!1},n["on"+o]=t),n[e][o].locked?(n[e][o].stack.push([i]),s=2):n[e][o].heap.indexOf(i)<0&&(n[e][o].heap.push(i),s=1)),s},once(e,t,n){l.listeners.on(e,t,(function o(i){l.listeners.remove(e,t,o),n.call(e,i)}))},list(t,n){let o;if(n)o=Object.hasOwn(t,e)&&n in t[e]?t[e][n].heap.slice(0):[];else if(o={__proto__:null},Object.hasOwn(t,e))for(let i in t[e])o[i]=t[e][i].heap.slice(0);return o},off(t,o,i){let s=0;if(Object.hasOwn(t,e))if(o){if(o in t[e])if(t[e][o].locked)t[e][o].stack.push(i),s=2;else if("function"==typeof i){let r=t[e][o].heap.indexOf(i);r>=0&&(t[e][o].heap.splice(r,1),n(t,o),s=1)}else n(t,o,!0),s=1}else{for(const o in t[e])t[e][o].locked?(t[e][o].stack.push(void 0),s=2):n(t,o,!0);s||(s=1)}return s},trigger(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{__proto__:null};const o="on"+t;"function"==typeof e[o]&&(n.type=t,e[o](n))}}})(),(()=>{let e,t,n;const o=document.querySelector("#panel"),s=o.querySelector(":scope>.contents>div"),r=s.querySelector(":scope>a.close");function c(e,o){let i,r;t=!0,o?(i=0,r="-100%",s.style.marginLeft=r):(i="-100%",r=0,s.style.marginLeft=""),s.animate([{marginLeft:i},{marginLeft:r}],{duration:200,easing:"ease-in-out"}).onfinish=function(){if(this.onfinish=null,t=!1,e(),"function"==typeof n){let e=n;n=void 0,e()}}}function d(){if("function"!=typeof i[e].onunload||!i[e].onunload())return i[e].status--,c((function(){"function"==typeof i[e].onunloadend&&i[e].onunloadend(),i[e].status--,s.querySelector(":scope>div."+e).style.display="none",o.style.display="",i[e].autoDestroy&&a(i[e],"panel",e),e=void 0}),!1),!0}l.openPanel=function(e,t){if(e in i)return u("panel",i[e],e,(function(){"function"==typeof i[e].open?i[e].open(t):l.showPanel(e)})),!0},l.showPanel=function(r){let a=0;return i[r].status>1&&(t?(n=l.showPanel.bind(this,r),a=2):e?e===r?("function"==typeof i[r].onload&&i[r].onload(),"function"==typeof i[r].onloadend&&i[r].onloadend(),a=1):d()&&(n=l.showPanel.bind(this,r),a=1):(i[r].status++,"function"==typeof i[r].onload&&i[r].onload(),o.className=e=r,o.style.display="block",s.querySelector(":scope>div."+r).style.display="",c((function(){"function"==typeof i[r].onloadend&&i[r].onloadend(),i[r].status++}),!0),a=1)),a},l.closePanel=function(o){let i=0;return t?(n=this.closePanel.bind(this,o),i=2):e&&(!o||e===o||Array.isArray(o)&&o.indexOf(e)>=0)&&d()&&(i=1),i},l.getCurrentPanel=function(){return e},l.destroyPanel=function(e){if(2===i[e].status)return a(i[e],"panel",e),!0},r.appendChild(l.makeSvg("mdiWindowClose",3)),r.onclick=o.querySelector(":scope>.mask").onclick=l.closePanel.bind(l,void 0)})(),(()=>{let e;const t=document.getElementById("popup"),n=t.querySelector(":scope>div"),i=t.querySelector(":scope>div>a.close");l.openPopup=function(e,t){if(e in o)return u("popup",o[e],e,(function(){"function"==typeof o[e].open?o[e].open(t):l.showPopup(e)})),!0},l.showPopup=function(i){let s;return o[i].status>1&&(e?e===i?("function"==typeof o[i].onload&&o[i].onload(),s=!0):"function"==typeof o[e].onunload&&o[e].onunload()||(o[e].status--,n.querySelector(":scope>div."+e).style.display="none",o[e].autoDestroy&&a(o[e],"popup",e),n.querySelector(":scope>div."+i).style.display="",t.className=e=i,o[i].status++,"function"==typeof o[i].onload&&o[i].onload(),s=!0):(n.querySelector(":scope>div."+i).style.display="",t.style.display="flex",t.className=e=i,l.listeners.trigger(l.popupEvents,"show",{id:e}),o[i].status++,"function"==typeof o[i].onload&&o[i].onload(),s=!0)),s},l.closePopup=function(i){let s;if(e&&(!i||e===i||Array.isArray(i)&&i.indexOf(e)>=0)&&("function"!=typeof o[e].onunload||!o[e].onunload()))return o[e].status--,s=e,n.querySelector(":scope>div."+e).style.display="none",t.style.display=t.className="",o[s].autoDestroy&&a(o[s],"popup",e),e="",l.listeners.trigger(l.popupEvents,"hide",{id:s}),!0},l.getCurrentPopup=function(){return e},l.destroyPopup=function(e){if(2===o[e].status)return a(o[e],"popup",e),!0},l.popupEvents={__proto__:null},i.appendChild(l.makeSvg("mdiWindowClose",3)),i.onclick=l.closePopup.bind(l,void 0)})(),(()=>{const t=document.querySelector("#photoview"),n=t.querySelector("a.close"),o=t.querySelector(".btns").querySelector("div"),i=o.querySelector("a.prev"),s=o.querySelector("a.next"),r=o.querySelector("a.flip"),a=o.querySelector("a.rotate"),c=t.querySelector(".imgs"),u=e(c),d=[],p=[],f=[];let h,y,g;function m(){g=void 0,t.classList.remove("act")}function v(){h=self.innerWidth,y=self.innerHeight,"number"==typeof u.current&&d[u.current]&&S(u.current)}function x(e){u.children[e].onload=function(){this.onload=null,d[e]={w:this.width,h:this.height},p[e]=0,f[e]=[1,1],u.current===e&&S(e),this.style.visibility="visible"}}function S(e){let t,n,o,i,s;const r=p[e]%2;r?(i=d[e].h,s=d[e].w):(i=d[e].w,s=d[e].h),i>h||s>y?(t=i/s,h/y>t?(o=y,n=o*t):(n=h,o=n/t),r?(i=o,s=n):(i=n,s=o),u.children[e].style.cursor="zoom-in"):(i=d[e].w,s=d[e].h,u.children[e].style.cursor=""),u.children[e].style.top=(y-s)/2+"px",u.children[e].style.left=(h-i)/2+"px",u.children[e].style.width=i+"px",u.children[e].style.height=s+"px",u.children[e].style.transform="rotate("+90*p[e]+"deg) scale("+f[e][0]+","+f[e][1]+")"}l.showPhotoView=function(e,t,n,o){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const n=new Image;n.src=e[t],u.add(n),x(t)}if(t>=0&&t<u.children.length&&u.slideTo(t,!0),i.style.display=s.style.display=u.children.length>1?"":"none",Array.isArray(n))for(let e=0;e<n.length;e++){const t=document.createElement(t);"string"==typeof n[e]?t.innerHTML=n[e]:n[e]instanceof Node?t.replaceChildren(n[e]):n[e]&&"function"==typeof n[e][Symbol.iterator]&&t.replaceChildren(...n[e]),"function"==typeof o&&(t.onclick=()=>o(e,u.current)),s.insertAdjacentElement("beforebegin",t)}}},l.hidePhotoView=function(){for(d.splice(0),f.splice(0);u.children.length;)u.remove(0)},c.onclick=function(e){"IMG"===e.target.nodeName&&("zoom-in"===e.target.style.cursor?(p[u.current]%2?(e.target.style.top=d[u.current].w>y?(d[u.current].w-d[u.current].h)/2+"px":(y-d[u.current].h)/2+"px",e.target.style.left=d[u.current].h>h?(d[u.current].h-d[u.current].w)/2+"px":(h-d[u.current].w)/2+"px"):(e.target.style.top=d[u.current].h>y?0:(y-d[u.current].h)/2+"px",e.target.style.left=d[u.current].w>h?0:(h-d[u.current].w)/2+"px"),e.target.style.width=d[u.current].w+"px",e.target.style.height=d[u.current].h+"px",e.target.style.cursor="zoom-out"):"zoom-out"===e.target.style.cursor&&S(u.current))},t.onmousemove=function(e){t.classList.add("act"),g&&(clearTimeout(g),g=void 0),"A"!==e.target.nodeName&&(g=setTimeout(m,2e3))},self.addEventListener("resize",v),i.onclick=function(){u.slideTo(u.current-1)},s.onclick=function(){u.slideTo(u.current+1)},r.onclick=function(){p[u.current]%2?f[u.current][1]*=-1:f[u.current][0]*=-1,S(u.current)},a.onclick=function(){"number"==typeof p[u.current]&&(p[u.current]++,S(u.current))},n.onclick=l.hidePhotoView,u.onchange=function(){void 0===this.current?t.style.display="":(d[this.current]&&S(this.current),t.style.display="flex")},i.appendChild(l.makeSvg("mdiChevronLeft",1)),s.appendChild(l.makeSvg("mdiChevronRight",1)),r.appendChild(l.makeSvg("mdiFlipHorizontal",1)),a.appendChild(l.makeSvg("mdiFileRotateRightOutline",1)),n.appendChild(l.makeSvg("mdiCloseThick",1)),v()})(),(()=>{const e=document.querySelector("#hint"),t=document.querySelector("#readable"),n=document.querySelector("#dialog"),o=document.querySelector("#loading"),i=n.querySelector(":scope>div>.content"),r=n.querySelector(":scope>div>.btns>a.yes"),a=n.querySelector(":scope>div>.btns>a.no"),c=n.querySelector(":scope>div>.close"),u=[];let d,p,f,h=0,y=0;function g(e,t,o,l){return n.className?(u.push([e,t,o,l]),h+u.length):("alert"===e?Array.isArray(t)?(i.textContent=t[0],a.textContent=t[1]):(i.textContent=t,a.textContent=s.close):"confirm"===e?Array.isArray(t)?(i.textContent=t[0],r.textContent=t[1],a.textContent=t[2]):(i.textContent=t,r.textContent=s.yes,a.textContent=s.no):"string"==typeof t?i.innerHTML=t:t instanceof Node?i.replaceChildren(t):t&&"function"==typeof t[Symbol.iterator]?i.replaceChildren(...t):i.innerHTML="",n.className="type",n.style.display="flex",++h,p=o,"function"==typeof l&&l(h),h)}l.showLoading=function(e){o.querySelector(":scope>div").lastChild.data=e||s.loading,0===y&&(o.style.display="flex"),y+=1},l.hideLoading=function(){y>0&&(y-=1,0===y&&(o.style.display="",l.listeners.trigger(l.dialogEvents,"loaded")))},l.isLoading=()=>y>0,l.hint=function(t,n,o){e.className=n||"",e.querySelector("span").textContent=t,d?clearTimeout(d):(e.style.opacity=1,e.animate([{opacity:0},{opacity:1}],{duration:400,easing:"ease-in-out"})),o||(o="error"===n?4e3:"warning"===n?3e3:2e3),d=setTimeout((function(){d=0,e.style.opacity="",e.animate([{opacity:1},{opacity:0}],{duration:400,easing:"ease-in-out"})}),o)},l.showReadable=function(e,n,o,i,s){let r=t.querySelector(":scope>div");t.className=s||"",t.style.display="flex",r.style.width=n,r.style.height=o,r=r.querySelector(":scope>div"),"string"==typeof e?r.innerHTML=e:e instanceof Node?r.replaceChildren(e):e&&"function"==typeof e[Symbol.iterator]?r.replaceChildren(...e):r.innerHTML="",f=i},l.hideReadable=function(){"function"==typeof f&&(f(),f=void 0),t.style.display="",t.querySelector(":scope>div>div").innerHTML=""},l.closeDialog=function(e,t){const o="number"==typeof t;if(o&&t!==h)o&&o>h&&t<=h+u.length&&(u[t-h-1]=void 0);else{let o;for("function"==typeof p&&(p(e,t),p=void 0),n.className=n.style.display="";u.length&&!o;)o=u.shift(),o?g.apply(void 0,o):++h}},l.showForeign=(e,t,n,o)=>l.showReadable('<iframe frameborder="no" allowtransparency="yes" marginwidth="0" marginheight="0" src="'+e+'"></iframe>',t,n,o,"foreign"),l.confirm=(e,t,n)=>g("confirm",e,t,n),l.alert=(e,t,n)=>g("alert",e,t,n),l.htmlDialog=(e,t,n,o)=>g(t||"",e,n,o),c.appendChild(l.makeSvg("mdiWindowClose",3)),t.querySelector(":scope>div>a").onclick=l.hideReadable,r.onclick=l.closeDialog.bind(l,!0),a.onclick=c.onclick=l.closeDialog.bind(l,!1),l.dialogEvents={__proto__:null}})(),(()=>{let e;function t(t,o){(!t||t===e||Array.isArray(t)&&t.indexOf(e)>=0)&&(o||d(),"function"==typeof n[e].onload&&n[e].onload(!0))}function o(){const t=history.state,o=l.parseHash(location.hash);history.replaceState&&history.replaceState(!0,null),l.location&&l.isSameLocation(l.location,o)||(l.lastLocation=l.location,l.location=o,l.lastLocation&&d(),l.listeners.trigger(l.pageEvents,"route",{history:t}),u("page",n[o.id],o.id,(function(i){let s;o.id!==e?(s=i||!t,e&&("function"==typeof n[e].onunload&&n[e].onunload(),n[e].status--,c("page",e).style.display="none",n[e].autoDestroy&&a(n[e],"popup",activePopup)),document.body.className=e=o.id,c("page",o.id).style.display="",n[o.id].status++,"function"==typeof n[o.id].onload&&n[o.id].onload(s)):"function"==typeof n[o.id].onload&&n[o.id].onload(),l.listeners.trigger(l.pageEvents,"routeend",{history:t,force:s})})))}l.init=function(e){let t,i;if(e in n)if(r){if(r!==e&&(t=r,r=e,l.location.id===t))return o(),!0}else r=e,self.addEventListener("hashchange",o),o(),"autoPopup"in l.location.args&&("autoPopupArg"in l.location.args&&(i=l.location.args.autoPopupArg.parseJsex(),i&&(i=i.value)),l.openPopup(l.location.args.autoPopup,i))},l.reloadPage=function(e,n){let o;l.isLoading()?(o=l.location,l.listeners.on(l.dialogEvents,"loaded",(function i(s){l.listeners.off(this,s.type,i),o===l.location&&t(e,n)}))):t(e,n)},l.destroyPage=function(e){if(2===n[e].status)return a(n[e],"page",e),!0},l.pageEvents={__proto__:null}})(),(()=>{const e=document.querySelector("#tips"),t={__proto__:null};let n=0;function o(){this.style.visibility="hidden",this.style.transitionProperty="margin-bottom",this.style.marginBottom=-this.offsetHeight+"px",this.ontransitionend=()=>this.remove()}function i(){this.style.transitionProperty=this.style.marginBottom="",this.ontransitionend=null}l.showTip=function(s){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=n++,a=document.createElement("div"),c=()=>{u&&clearTimeout(u),delete t[l],a.style.transitionProperty="margin-left",a.style.marginLeft=a.offsetWidth+20+"px",a.ontransitionend=o};let u;return t[l]=c,"string"==typeof r.className&&(a.className=r.className),r.showClose&&(a.insertAdjacentHTML("beforeend",'<a class="close">✕</a>'),a.firstChild.onclick=c),"string"==typeof s?a.insertAdjacentHTML("beforeend",s):a.appendChild(s),"number"==typeof r.timeout&&(a.onmouseover=()=>u=clearTimeout(u),a.onmouseout=()=>u=setTimeout(c,r.timeout),a.onmouseout()),e.appendChild(a),a.style.marginBottom=-a.offsetHeight+"px",a.offsetHeight,a.ontransitionend=i,a.style.transitionProperty="margin-bottom",a.style.marginBottom="10px",c},l.clearTips=function(){for(const e in t)t[e]()}})(),l;function a(e,t,n){let o,i=c(t,n);i&&("function"==typeof e.ondestroy&&e.ondestroy(),i.remove(),e.js&&(o=t+"/"+n+"/"+n,require.defined(o)&&(i=require(o),require.undef(o),i&&(self.Reflect?Reflect.setPrototypeOf(e,Object.prototype):e.__proto__=Object.prototype)))),e.css&&e.css.href&&(l.removeCss(e.css),e.css=!0),delete e.status}function c(e,t){let n="#"+e;return"popup"===e?n+=">div":"panel"===e&&(n+=">.contents>div"),t&&(n+=">div."+t),document.querySelector(n)}function u(e,t,n,o){let i,r;if(t.status>1)o();else if(!t.status){t.status=1,r="page"===e,i=e+"/"+n+"/";let o=require.toUrl(i);if(t.css&&(t.css=l.appendCss(o+n)),t.html){let i=o+n+".html";fetch(i).then((o=>{if(o.ok)return o.text().then(u);a(t,e,n),BUILD&&404===o.status?p():d(i,o.status)}),(e=>d(i,e.message))).then(l.hideLoading),l.showLoading()}else u("")}function u(s){let r;const u=c(e);u.insertAdjacentHTML("afterBegin",'<div class="'+n+'" style="display:none">'+s+"</div>"),t.js?(u.firstChild.style.visibility="hidden",l.showLoading(),l.listeners.on(l.dialogEvents,"loaded",(function e(t){l.listeners.off(this,t.type,e),u.querySelector(":scope>div."+n).style.visibility=""})),r=i+n,require([r],(function(e){e&&(self.Reflect?Reflect.setPrototypeOf(t,e):t.__proto__=e),t.status++,o(!0),l.hideLoading()}),BUILD&&function(o){a(t,e,n),o.requireType&&"scripterror"!==o.requireType&&"nodefine"!==o.requireType||o.xhr&&404!==o.xhr.status?d(r,o.message):p(),l.hideLoading()})):(t.status++,o(!0))}function d(e,t){l.alert(s.error.replace("${res}",e)+t,r?function(){history.back()}:void 0)}function p(){r?location.reload():l.confirm(s.update,(function(e){e&&location.reload()}))}}function d(){l.closePanel(),l.closePopup(),l.hideReadable()}}));